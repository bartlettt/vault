---
# ***
# WARNING: Do not EDIT or MERGE this file, it is generated by packagespec.
# ***

version: 2.1

executors:
  releaser:
    docker:
      - image: circleci/buildpack-deps
    environment:
      PRODUCT_REVISION: ""
      AUTO_INSTALL_TOOLS: 'YES'
    shell: /usr/bin/env bash -euo pipefail -c

workflows:
  version: 2
  build-standalone:
    jobs:
      - cache-builder-images
      - darwin_386_package: { requires: [ cache-builder-images ] }
      - darwin_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_386_package: { requires: [ cache-builder-images ] }
      - freebsd_amd64_package: { requires: [ cache-builder-images ] }
      - freebsd_arm_package: { requires: [ cache-builder-images ] }
      - linux_386_package: { requires: [ cache-builder-images ] }
      - linux_amd64_package: { requires: [ cache-builder-images ] }
      - linux_arm_package: { requires: [ cache-builder-images ] }
      - linux_arm64_package: { requires: [ cache-builder-images ] }
      - netbsd_386_package: { requires: [ cache-builder-images ] }
      - netbsd_amd64_package: { requires: [ cache-builder-images ] }
      - openbsd_386_package: { requires: [ cache-builder-images ] }
      - openbsd_amd64_package: { requires: [ cache-builder-images ] }
      - solaris_amd64_package: { requires: [ cache-builder-images ] }
      - windows_386_package: { requires: [ cache-builder-images ] }
      - windows_amd64_package: { requires: [ cache-builder-images ] }
      - bundle-releases:
          requires:
            - darwin_386_package
            - darwin_amd64_package
            - freebsd_386_package
            - freebsd_amd64_package
            - freebsd_arm_package
            - linux_386_package
            - linux_amd64_package
            - linux_arm_package
            - linux_arm64_package
            - netbsd_386_package
            - netbsd_amd64_package
            - openbsd_386_package
            - openbsd_amd64_package
            - solaris_amd64_package
            - windows_386_package
            - windows_amd64_package
jobs:
  cache-builder-images:
    executor: releaser
    steps:
      - setup_remote_docker
      - checkout
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
            - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
            - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
            - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
            - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
            - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
            - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
            - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Finish early if loaded exact match from cache.
          command: |
            if [ -f .buildcache/archives/06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0.tar.gz ]; then
              echo "Exact match found in cache, skipping build."
              circleci-agent step halt
            else
              echo "No exact match found, proceeding with build."
            fi
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            LAYER_SPEC_ID=06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0 make -C packages*.lock load-builder-cache
      - run: make -f packages*.lock/layer.mk 00-base-31734631257b3779d02665ecc77e06482f6104e8-image
      - run: make -f packages*.lock/layer.mk 01-install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a-image
      - run: make -f packages*.lock/layer.mk 02-install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394-image
      - run: make -f packages*.lock/layer.mk 03-set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10-image
      - run: make -f packages*.lock/layer.mk 04-install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454-image
      - run: make -f packages*.lock/layer.mk 05-ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0-image
      - run: make -f packages*.lock/layer.mk 06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0-save
      - save_cache:
          key: cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          paths:
            - .buildcache/archives/06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0.tar.gz
      - run: mv .buildcache/archives/06-build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0.tar.gz .buildcache/archives/05-ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea.tar.gz
      - save_cache:
          key: cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          paths:
            - .buildcache/archives/05-ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea.tar.gz
      - run: mv .buildcache/archives/05-ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea.tar.gz .buildcache/archives/04-install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454.tar.gz
      - save_cache:
          key: cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          paths:
            - .buildcache/archives/04-install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454.tar.gz
      - run: mv .buildcache/archives/04-install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454.tar.gz .buildcache/archives/03-set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10.tar.gz
      - save_cache:
          key: cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          paths:
            - .buildcache/archives/03-set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10.tar.gz
      - run: mv .buildcache/archives/03-set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10.tar.gz .buildcache/archives/02-install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394.tar.gz
      - save_cache:
          key: cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          paths:
            - .buildcache/archives/02-install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394.tar.gz
      - run: mv .buildcache/archives/02-install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394.tar.gz .buildcache/archives/01-install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a.tar.gz
      - save_cache:
          key: cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          paths:
            - .buildcache/archives/01-install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a.tar.gz
      - run: mv .buildcache/archives/01-install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a.tar.gz .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz
      - save_cache:
          key: cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
          paths:
            - .buildcache/archives/00-base-31734631257b3779d02665ecc77e06482f6104e8.tar.gz
  darwin_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 74ce47808979cd113b983ab9f5ea6e76a9ab1d01
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01-{{checksum ".buildcache/cache-keys/package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8e3e_{{checksum ".buildcache/cache-keys/copy-source-8e3e42cafea97e9cbcaed67fbd15787d255207ba"}}
          - cache001-warm-go-build-vendor-cache_1222_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01-{{checksum ".buildcache/cache-keys/package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_1222_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-12225c8ef68cd05d75b164681c9d0463a7a98f80.tar.gz

  darwin_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb-{{checksum ".buildcache/cache-keys/package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ddbb_{{checksum ".buildcache/cache-keys/copy-source-ddbb542a86e84e8293cc7627c3925e33651c0ecb"}}
          - cache001-warm-go-build-vendor-cache_de1d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb-{{checksum ".buildcache/cache-keys/package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_de1d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-de1d44767bbc6a5c2bee1d7fd74fff15472a674f.tar.gz

  freebsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 0fb58632af5e41b27fcbe91275700e3b43ec0a07
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-0fb58632af5e41b27fcbe91275700e3b43ec0a07-{{checksum ".buildcache/cache-keys/package-0fb58632af5e41b27fcbe91275700e3b43ec0a07"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_8a1a_{{checksum ".buildcache/cache-keys/copy-source-8a1a3464487dd0bf35500ee7fa2af199177f9280"}}
          - cache001-warm-go-build-vendor-cache_5fd9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-0fb58632af5e41b27fcbe91275700e3b43ec0a07-{{checksum ".buildcache/cache-keys/package-0fb58632af5e41b27fcbe91275700e3b43ec0a07"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_5fd9_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-5fd9c57c4ce3c581aa8b745a9ae7f664d49ef0bd.tar.gz

  freebsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: efbf32a96b5e0b8612becb561935a89e7a4f837d
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-efbf32a96b5e0b8612becb561935a89e7a4f837d-{{checksum ".buildcache/cache-keys/package-efbf32a96b5e0b8612becb561935a89e7a4f837d"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_69ea_{{checksum ".buildcache/cache-keys/copy-source-69ea2ad7874ada6cafc06bac7b9f757637f18be6"}}
          - cache001-warm-go-build-vendor-cache_ba12_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-efbf32a96b5e0b8612becb561935a89e7a4f837d-{{checksum ".buildcache/cache-keys/package-efbf32a96b5e0b8612becb561935a89e7a4f837d"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_ba12_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-ba120951c1306c9e4be089f6a267770188cfc32a.tar.gz

  freebsd_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 550db36b1278e18787b284e3195d66ee17c13735
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-550db36b1278e18787b284e3195d66ee17c13735-{{checksum ".buildcache/cache-keys/package-550db36b1278e18787b284e3195d66ee17c13735"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_1085_{{checksum ".buildcache/cache-keys/copy-source-10854cb8021169d122f58374562bac45d7a10d6e"}}
          - cache001-warm-go-build-vendor-cache_b763_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-550db36b1278e18787b284e3195d66ee17c13735-{{checksum ".buildcache/cache-keys/package-550db36b1278e18787b284e3195d66ee17c13735"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_b763_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-b76326780d29031685bbd3038efe7d158d134132.tar.gz

  linux_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 1f94336fabc078dab84da08ec463a5618e925d68
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-1f94336fabc078dab84da08ec463a5618e925d68-{{checksum ".buildcache/cache-keys/package-1f94336fabc078dab84da08ec463a5618e925d68"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_d1ed_{{checksum ".buildcache/cache-keys/copy-source-d1eda11bb6005d29e8fc1b1aae490c510bd9630b"}}
          - cache001-warm-go-build-vendor-cache_43c0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-1f94336fabc078dab84da08ec463a5618e925d68-{{checksum ".buildcache/cache-keys/package-1f94336fabc078dab84da08ec463a5618e925d68"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_43c0_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-43c09371aa7dbe6338751a3045adc513aaf0630e.tar.gz

  linux_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f4a6ec31db808f00d3a173f90c496f7dfabe7744
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-f4a6ec31db808f00d3a173f90c496f7dfabe7744-{{checksum ".buildcache/cache-keys/package-f4a6ec31db808f00d3a173f90c496f7dfabe7744"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_edbb_{{checksum ".buildcache/cache-keys/copy-source-edbbba9a1e85771560a86a51083858bc4910e5e6"}}
          - cache001-warm-go-build-vendor-cache_cddc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-f4a6ec31db808f00d3a173f90c496f7dfabe7744-{{checksum ".buildcache/cache-keys/package-f4a6ec31db808f00d3a173f90c496f7dfabe7744"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_cddc_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-cddc5cc60d97c8b286509284601eb88e5cc1b81b.tar.gz

  linux_arm_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 79df9841b4b8d3bd121ac7096cbc60f67c726195
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-79df9841b4b8d3bd121ac7096cbc60f67c726195-{{checksum ".buildcache/cache-keys/package-79df9841b4b8d3bd121ac7096cbc60f67c726195"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_0dc4_{{checksum ".buildcache/cache-keys/copy-source-0dc4d48388cda33981d3042df49ff104de38c945"}}
          - cache001-warm-go-build-vendor-cache_9d70_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-79df9841b4b8d3bd121ac7096cbc60f67c726195-{{checksum ".buildcache/cache-keys/package-79df9841b4b8d3bd121ac7096cbc60f67c726195"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_9d70_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-9d70035da36fbdc323b06ada10daf58e6d189193.tar.gz

  linux_arm64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b-{{checksum ".buildcache/cache-keys/package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_61b4_{{checksum ".buildcache/cache-keys/copy-source-61b4712f869a24390334eac79f07bf9ebc52c079"}}
          - cache001-warm-go-build-vendor-cache_8c82_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b-{{checksum ".buildcache/cache-keys/package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_8c82_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-8c822ba5ee063d652dff9e789f153a6b162c50c9.tar.gz

  netbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: d6eb414747fa37bf009fb14cb2abefccb32984b5
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-d6eb414747fa37bf009fb14cb2abefccb32984b5-{{checksum ".buildcache/cache-keys/package-d6eb414747fa37bf009fb14cb2abefccb32984b5"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_6be0_{{checksum ".buildcache/cache-keys/copy-source-6be0f2f5fbda68e9f4230daf6acbc139108f96a4"}}
          - cache001-warm-go-build-vendor-cache_f876_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-d6eb414747fa37bf009fb14cb2abefccb32984b5-{{checksum ".buildcache/cache-keys/package-d6eb414747fa37bf009fb14cb2abefccb32984b5"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_f876_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-f876076a9fc5d9cb1953aa2dbaec4b9be06ba077.tar.gz

  netbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 32a45ba7cca38d33e02be51ffe6078c9ad1478a0
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0-{{checksum ".buildcache/cache-keys/package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_0f2d_{{checksum ".buildcache/cache-keys/copy-source-0f2d5d7e5b6f274cf33995fe06756cb027b23014"}}
          - cache001-warm-go-build-vendor-cache_3c15_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0-{{checksum ".buildcache/cache-keys/package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3c15_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3c1544a4ea76eb74c3e608df589c47342c64695c.tar.gz

  openbsd_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 5a22ecae4775c3e6866e04c989146d30f503754d
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-5a22ecae4775c3e6866e04c989146d30f503754d-{{checksum ".buildcache/cache-keys/package-5a22ecae4775c3e6866e04c989146d30f503754d"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_5481_{{checksum ".buildcache/cache-keys/copy-source-54812d13c3878c6e2dfe7812dcdb38c5b2ee5fa1"}}
          - cache001-warm-go-build-vendor-cache_4d73_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-5a22ecae4775c3e6866e04c989146d30f503754d-{{checksum ".buildcache/cache-keys/package-5a22ecae4775c3e6866e04c989146d30f503754d"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_4d73_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-4d73d38a30a1b37ceef70beb8bea91548b85ba16.tar.gz

  openbsd_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 2499e2d82e7efa9908c881865926891ff419c577
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-2499e2d82e7efa9908c881865926891ff419c577-{{checksum ".buildcache/cache-keys/package-2499e2d82e7efa9908c881865926891ff419c577"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_2d1a_{{checksum ".buildcache/cache-keys/copy-source-2d1a5ab70e14becf161c94b9e8ef78da477e6eac"}}
          - cache001-warm-go-build-vendor-cache_16f5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-2499e2d82e7efa9908c881865926891ff419c577-{{checksum ".buildcache/cache-keys/package-2499e2d82e7efa9908c881865926891ff419c577"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_16f5_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-16f506fa344cf76952581ca9c92695652d638359.tar.gz

  solaris_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: f14fbc01240ce212b6cfd230ea9910b6fb80ce83
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83-{{checksum ".buildcache/cache-keys/package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_e491_{{checksum ".buildcache/cache-keys/copy-source-e4919d12d4d579429115ce132f66aaa67c92509e"}}
          - cache001-warm-go-build-vendor-cache_a8f7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83-{{checksum ".buildcache/cache-keys/package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_a8f7_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-a8f76a62481f2ca9cda207efcb8cb9517e1c5039.tar.gz

  windows_386_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: 19efbe8a35fb4a8acf643449dc26d44c03711510
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-19efbe8a35fb4a8acf643449dc26d44c03711510-{{checksum ".buildcache/cache-keys/package-19efbe8a35fb4a8acf643449dc26d44c03711510"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_43cd_{{checksum ".buildcache/cache-keys/copy-source-43cd1e22eb22d1cb46875f3084f7a0114bc08de7"}}
          - cache001-warm-go-build-vendor-cache_3d2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-19efbe8a35fb4a8acf643449dc26d44c03711510-{{checksum ".buildcache/cache-keys/package-19efbe8a35fb4a8acf643449dc26d44c03711510"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_3d2d_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-3d2da534455d043c6e108757337644caf6f0397f.tar.gz

  windows_amd64_package:
    executor: releaser
    environment:
      - PACKAGE_SPEC_ID: a352ff03d5a829952398fcabc99230b6a9488f95
    steps:
      - setup_remote_docker
      - checkout

      # Restore the package cache first, we might not need to rebuild.
      - write-package-cache-key
      - restore_cache:
          key: 'cache001-package-a352ff03d5a829952398fcabc99230b6a9488f95-{{checksum ".buildcache/cache-keys/package-a352ff03d5a829952398fcabc99230b6a9488f95"}}'
      - run:
          name: Check the cache status.
          command: |
            if ! { PKG=$(find .buildcache/packages/store -maxdepth 1 -mindepth 1 -name '*.zip' 2> /dev/null) && [ -n "$PKG" ]; }; then
              echo "No package found, continuing with build."
              exit 0
            fi
            echo "Package already cached, skipping build."
            circleci-agent step halt

      # We need to rebuild, so load the builder cache.
      - write-build-layer-cache-keys
      - restore_cache:
          keys:
          - cache001-copy-source_ebf1_{{checksum ".buildcache/cache-keys/copy-source-ebf1da591a6cccdcc10038d731c9a223b719d54a"}}
          - cache001-warm-go-build-vendor-cache_296b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c"}}
          - cache001-build-static-assets_bab1_{{checksum ".buildcache/cache-keys/build-static-assets-bab10123c5eab7d17baabe811ea253220f72b4d8"}}
          - cache001-build-ui_b5ee_{{checksum ".buildcache/cache-keys/build-ui-b5ee0cfe233357f42f808a73c38b51276e2630e0"}}
          - cache001-ui-dependencies_31de_{{checksum ".buildcache/cache-keys/ui-dependencies-31deb73a3179758b5ddba202c6ec27f3010104ea"}}
          - cache001-install-yarn_0dd0_{{checksum ".buildcache/cache-keys/install-yarn-0dd03ba30a75bc7b6bb05d9fadff96a844be0454"}}
          - cache001-set-workdir_1792_{{checksum ".buildcache/cache-keys/set-workdir-17921c19d37884b73fc9ca8dd83e0fc552532b10"}}
          - cache001-install-go-tools_cbd7_{{checksum ".buildcache/cache-keys/install-go-tools-cbd71349f0f0fb3f1cb812c9459fee307caac394"}}
          - cache001-install-go_5172_{{checksum ".buildcache/cache-keys/install-go-5172940f5c97a0e1f9d65002c64424c46f95bb8a"}}
          - cache001-base_3173_{{checksum ".buildcache/cache-keys/base-31734631257b3779d02665ecc77e06482f6104e8"}}
      - run:
          name: Load whatever builder cache we have (if any) into the Docker daemon
          no_output_timeout: 30m
          command: |
            make -C packages*.lock load-builder-cache
      - run: make -C packages*.lock package
      - run: ls -lahR .buildcache/packages
      # Save package cache.
      - save_cache:
          key: 'cache001-package-a352ff03d5a829952398fcabc99230b6a9488f95-{{checksum ".buildcache/cache-keys/package-a352ff03d5a829952398fcabc99230b6a9488f95"}}'
          paths:
            - .buildcache/packages/store
      # Save builder image cache if necessary.
      # The range should only iterate over a single layer.
      - run:
          name: Check builder cache status
          command: |
            if [ -f .buildcache/archives/08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c.tar.gz ]; then
              echo "Builder image already cached, skipping cache step."
              circleci-agent step halt
            fi
      - run: make -f packages*.lock/layer.mk 08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c-save
      - save_cache:
          key: 'cache001-warm-go-build-vendor-cache_296b_{{checksum ".buildcache/cache-keys/warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c"}}'
          paths:
            - .buildcache/archives/08-warm-go-build-vendor-cache-296b20db286b5b99d90faf07c9c27af50d7b827c.tar.gz


  bundle-releases:
    executor: releaser
    steps:
      - checkout
      - write-all-package-cache-keys
      - load-darwin_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 74ce47808979cd113b983ab9f5ea6e76a9ab1d01
          name: Write package metadata for darwin_386_package
          command: |
            make package-meta
      - load-darwin_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb
          name: Write package metadata for darwin_amd64_package
          command: |
            make package-meta
      - load-freebsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 0fb58632af5e41b27fcbe91275700e3b43ec0a07
          name: Write package metadata for freebsd_386_package
          command: |
            make package-meta
      - load-freebsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: efbf32a96b5e0b8612becb561935a89e7a4f837d
          name: Write package metadata for freebsd_amd64_package
          command: |
            make package-meta
      - load-freebsd_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 550db36b1278e18787b284e3195d66ee17c13735
          name: Write package metadata for freebsd_arm_package
          command: |
            make package-meta
      - load-linux_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 1f94336fabc078dab84da08ec463a5618e925d68
          name: Write package metadata for linux_386_package
          command: |
            make package-meta
      - load-linux_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f4a6ec31db808f00d3a173f90c496f7dfabe7744
          name: Write package metadata for linux_amd64_package
          command: |
            make package-meta
      - load-linux_arm_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 79df9841b4b8d3bd121ac7096cbc60f67c726195
          name: Write package metadata for linux_arm_package
          command: |
            make package-meta
      - load-linux_arm64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b
          name: Write package metadata for linux_arm64_package
          command: |
            make package-meta
      - load-netbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: d6eb414747fa37bf009fb14cb2abefccb32984b5
          name: Write package metadata for netbsd_386_package
          command: |
            make package-meta
      - load-netbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 32a45ba7cca38d33e02be51ffe6078c9ad1478a0
          name: Write package metadata for netbsd_amd64_package
          command: |
            make package-meta
      - load-openbsd_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 5a22ecae4775c3e6866e04c989146d30f503754d
          name: Write package metadata for openbsd_386_package
          command: |
            make package-meta
      - load-openbsd_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 2499e2d82e7efa9908c881865926891ff419c577
          name: Write package metadata for openbsd_amd64_package
          command: |
            make package-meta
      - load-solaris_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: f14fbc01240ce212b6cfd230ea9910b6fb80ce83
          name: Write package metadata for solaris_amd64_package
          command: |
            make package-meta
      - load-windows_386_package
      - run:
          environment:
            PACKAGE_SPEC_ID: 19efbe8a35fb4a8acf643449dc26d44c03711510
          name: Write package metadata for windows_386_package
          command: |
            make package-meta
      - load-windows_amd64_package
      - run:
          environment:
            PACKAGE_SPEC_ID: a352ff03d5a829952398fcabc99230b6a9488f95
          name: Write package metadata for windows_amd64_package
          command: |
            make package-meta
      - run:
          name: Write package aliases
          command:
            make aliases
      - run:
          name: List Build Cache
          command: ls -lahR .buildcache

      # Give the lockfile a name store_artifacts can work with.
      - run: cp packages*.lock/pkgs.yml lockfile-standalone.yml

      # Surface the lock file as an artifact.
      - store_artifacts:
          path: lockfile-standalone.yml
          destination: lockfile-standalone.yml

      # Surface the package store directory as an artifact.
      # This makes each zipped package separately downloadable.
      - store_artifacts:
          path: .buildcache/packages
          destination: packages-standalone

      # Surface a tarball of the whole package store plus lockfile as an artifact.
      - run: tar -czf packages-standalone.tar.gz .buildcache/packages lockfile-standalone.yml
      - store_artifacts:
          path: packages-standalone.tar.gz
          destination: packages-standalone.tar.gz

      # Surface a tarball of just the metadata files.
      - run: tar -czf meta-standalone.tar.gz .buildcache/packages/store/*.json lockfile-standalone.yml
      - store_artifacts:
          path: meta-standalone.tar.gz
          destination: meta-standalone.tar.gz

commands:
  load-darwin_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01-{{checksum ".buildcache/cache-keys/package-74ce47808979cd113b983ab9f5ea6e76a9ab1d01"}}'
  
  load-darwin_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb-{{checksum ".buildcache/cache-keys/package-0a6e58f4bcb1efbb1895a3dac7c8dec019a0b9bb"}}'
  
  load-freebsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-0fb58632af5e41b27fcbe91275700e3b43ec0a07-{{checksum ".buildcache/cache-keys/package-0fb58632af5e41b27fcbe91275700e3b43ec0a07"}}'
  
  load-freebsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-efbf32a96b5e0b8612becb561935a89e7a4f837d-{{checksum ".buildcache/cache-keys/package-efbf32a96b5e0b8612becb561935a89e7a4f837d"}}'
  
  load-freebsd_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-550db36b1278e18787b284e3195d66ee17c13735-{{checksum ".buildcache/cache-keys/package-550db36b1278e18787b284e3195d66ee17c13735"}}'
  
  load-linux_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-1f94336fabc078dab84da08ec463a5618e925d68-{{checksum ".buildcache/cache-keys/package-1f94336fabc078dab84da08ec463a5618e925d68"}}'
  
  load-linux_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-f4a6ec31db808f00d3a173f90c496f7dfabe7744-{{checksum ".buildcache/cache-keys/package-f4a6ec31db808f00d3a173f90c496f7dfabe7744"}}'
  
  load-linux_arm_package:
    steps:
      - restore_cache:
          key: 'cache001-package-79df9841b4b8d3bd121ac7096cbc60f67c726195-{{checksum ".buildcache/cache-keys/package-79df9841b4b8d3bd121ac7096cbc60f67c726195"}}'
  
  load-linux_arm64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b-{{checksum ".buildcache/cache-keys/package-e0b2b5f76c3ed9eea4a06853828eed3bd1c5447b"}}'
  
  load-netbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-d6eb414747fa37bf009fb14cb2abefccb32984b5-{{checksum ".buildcache/cache-keys/package-d6eb414747fa37bf009fb14cb2abefccb32984b5"}}'
  
  load-netbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0-{{checksum ".buildcache/cache-keys/package-32a45ba7cca38d33e02be51ffe6078c9ad1478a0"}}'
  
  load-openbsd_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-5a22ecae4775c3e6866e04c989146d30f503754d-{{checksum ".buildcache/cache-keys/package-5a22ecae4775c3e6866e04c989146d30f503754d"}}'
  
  load-openbsd_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-2499e2d82e7efa9908c881865926891ff419c577-{{checksum ".buildcache/cache-keys/package-2499e2d82e7efa9908c881865926891ff419c577"}}'
  
  load-solaris_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83-{{checksum ".buildcache/cache-keys/package-f14fbc01240ce212b6cfd230ea9910b6fb80ce83"}}'
  
  load-windows_386_package:
    steps:
      - restore_cache:
          key: 'cache001-package-19efbe8a35fb4a8acf643449dc26d44c03711510-{{checksum ".buildcache/cache-keys/package-19efbe8a35fb4a8acf643449dc26d44c03711510"}}'
  
  load-windows_amd64_package:
    steps:
      - restore_cache:
          key: 'cache001-package-a352ff03d5a829952398fcabc99230b6a9488f95-{{checksum ".buildcache/cache-keys/package-a352ff03d5a829952398fcabc99230b6a9488f95"}}'
  

  write-build-layer-cache-keys:
    steps:
      - run:
          name: Write builder layer cache keys
          command: make -C packages*.lock write-builder-cache-keys

  write-package-cache-key:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-package-cache-key

  write-all-package-cache-keys:
    steps:
      - run:
          name: Write package cache key
          command: make -C packages*.lock write-all-package-cache-keys
